// Cafeteria Seat Reservation - Single location, 100 seats, 1000 employees
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Employee {
  id           String        @id @default(cuid())
  w3Id         String        @unique // w3 SSO identifier (or mock email for dev)
  email        String
  name         String
  location     String        @default("Bangalore")
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt
  reservations Reservation[]
}

model Reservation {
  id         String   @id @default(cuid())
  employeeId String
  employee   Employee @relation(fields: [employeeId], references: [id], onDelete: Cascade)
  date       String // YYYY-MM-DD - one reservation per employee per day
  seatNumber Int // 1..100
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@unique([employeeId, date])
  @@unique([date, seatNumber])
  @@index([date])
}
