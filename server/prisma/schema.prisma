// Cafeteria Seat Reservation - Single location, 100 seats per time slot, 1-hour slots
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model Employee {
  id           String        @id @default(cuid()) @map("_id")
  w3Id         String        @unique
  email        String
  name         String
  location     String        @default("Bangalore")
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  managerId String?
  manager   Manager? @relation(fields: [managerId], references: [id])
  
  reservations Reservation[]
}

model Reservation {
  id           String        @id @default(cuid()) @map("_id")
  employeeId   String
  employee     Employee      @relation(fields: [employeeId], references: [id], onDelete: Cascade)

  date         String        // YYYY-MM-DD
  timeSlot     String        // e.g. "09:00"
  seatNumbers  Int[]
  createdAt    DateTime      @default(now())
  updatedAt    DateTime      @updatedAt

  @@unique([employeeId, date, timeSlot])
  @@index([date, timeSlot])
}


model Manager {
  id         String     @id @default(cuid()) @map("_id")
  uid        String     @unique          // "0058TN744"
  name       String
  bluDollars Int        @default(50)
  createdAt DateTime   @default(now())
  updatedAt DateTime   @updatedAt

  employees  Employee[]
}
